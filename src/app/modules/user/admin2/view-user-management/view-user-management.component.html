<div class="heading">
    <div class="page-title-wrapper">
        <ul>
            <li>User Management</li>
            <li>Edit User</li>
        </ul>
    </div>
</div>
<div class="consen mainContainer">
    <div class="inner-container">
        <mat-card>
            <form [formGroup]="userorgdetailsForm" (ngSubmit)="userorgdetailsSubmit()">
                <div class="header">
                    <h3>User Details</h3>
                </div>
                <div class="main">
                    <div class="row">
                        <div class="col-sm-4">
                            <div class="input-group">
                                <label>User Name<sup>*</sup></label>
                                <input type="text" class="form-control reflect-model" formControlName="name"
                                [ngClass]="{ 'is-invalid': submited && userorgdetailsForm.controls['name'].errors }"
                                oninput="this.value = this.value.replace(/[^a-zA-Z ]/g, '').replace(/(\..*)\./g, '$1');" maxlength="50"/>
                            </div>
                            <!-- <div *ngIf="useruserorgdetailsForm.controls['name'].invalid && (useruserorgdetailsForm.controls['name'].touched || submited)">                           
                                <div class="error" *ngIf="useruserorgdetailsForm.controls['name'].errors?.required">
                                    Name is required
                                </div>
                            </div> -->
                        </div>
                        <div class="col-sm-4">
                            <div class="input-group">
                                <label>Designation<sup>*</sup></label>
                                <input type="text" class="form-control reflect-model"
                                [ngClass]="{ 'is-invalid': submited && userorgdetailsForm.controls['designation'].errors }"
                                    formControlName="designation" oninput="this.value = this.value.replace(/[^a-zA-Z10-9 ]/g, '').replace(/(\..*)\./g, '$1');"
                                    maxlength="50" /> 
                            </div>
                            <!-- <div *ngIf="useruserorgdetailsForm.controls['designation'].invalid && (useruserorgdetailsForm.controls['designation'].touched || submited)">
                                <div class="error" *ngIf="useruserorgdetailsForm.controls['designation'].errors?.required">
                                    Designation is required
                                </div>
                            </div> -->
                        </div>
                        <div class="col-sm-4" style="margin-top: 35px;">
                            <div class="flex-list toggle-btn-block">
                                <label>Inactive</label>
                                <mat-slide-toggle formControlName="status" [checked]="userorgData?.status == '1'"></mat-slide-toggle> &nbsp;
                                <label>Active</label>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-4">
                            <div class="input-group">
                                <label>Email Id<sup>*</sup></label>
                                <input type="text" class="form-control reflect-model" style="background: rgb(240, 237, 237);"
                                [ngClass]="{ 'is-invalid': submited && userorgdetailsForm.controls['email'].errors }"
                                    formControlName="email" maxlength="35" readonly/>
    
                            </div>
                                <!-- <div *ngIf="useruserorgdetailsForm.controls['email'].invalid && (useruserorgdetailsForm.controls['email'].touched || submited)">
                                <span class="error" *ngIf="useruserorgdetailsForm.controls['email'].errors?.required">
                                    Email Id is required.
                                </span>
                                <span class="error" *ngIf="useruserorgdetailsForm.controls['email'].errors?.email || useruserorgdetailsForm.controls['email'].errors?.pattern">
                                Invalid Email.
                            </span>
                            </div> -->
                        </div>
                        <div class="col-sm-4">
                            <label>Contact Number<sup>*</sup></label>
                            <div class="input-group prefix">
                                <span class="input-group-addon">+91</span>
                                <input type="text"  class="form-control reflect-model"
                                [ngClass]="{ 'is-invalid': submited && userorgdetailsForm.controls['contactnumber'].errors }"
                                    formControlName="contactnumber" maxlength="10" minlength="10"
                                    oninput="this.value = this.value.replace(/[^0-9]/g, '').replace(/(\..*)\./g, '$1');"/>
                            </div>
                        </div>

                        <!-- <div class="row"> --> 
                            
                        <!-- <div class="col-sm-4">
                            <label>User Type</label>
                            <input type="text" class="form-control" value="External" formControlName="usertype">
                            <div *ngIf="useruserorgdetailsForm.controls['usertype'].invalid && useruserorgdetailsForm.controls['usertype'].touched">
                                <div class="error" *ngIf="useruserorgdetailsForm.controls['usertype'].errors?.required">
                                    User Type is required
                                </div>
                            </div> -->
                        <!-- <select id="requesttype" class="form-control"> -->
                        <!-- <option hidden>Select</option>
                                <option value="1">External User</option>
                                <option value="2">Internal User</option> -->
                        <!-- </select> -->
                        <!-- </div>
                        <div class="col-sm-4">
                            <label>User Role</label>
                            <mat-form-field appearance="fill">
                                <mat-select class="form-control" placeholder="Select Role" formControlName="userrole">
                                    <mat-option *ngFor="let role of userroles" [value]="role"
                                        >{{role.roleName}}</mat-option>
                                </mat-select>
                            </mat-form-field>
                            <div *ngIf="useruserorgdetailsForm.controls['userrole'].invalid && useruserorgdetailsForm.controls['userrole'].touched">
                                <div class="error" *ngIf="useruserorgdetailsForm.controls['userrole'].errors?.required">
                                    User Role is required
                                </div>
                            </div> -->
                        <!-- <select id="requesttype" class="form-control">
                                <option hidden>Select</option>
                                <option value="1">level-1 Admin</option>
                                <option value="2">level-1 Admin</option>
                                <option value="3">External User</option>
                                <option value="4">Internal User</option>
                            </select> -->
                        <!-- </div> -->
                    </div>
                    <br>
                    <div class="header">
                        <h3>Organization Details</h3>
                    </div>
                    <div class="row">
                        <div class="col-md-8">
                            <div class="row">
                                <div class="col-sm-6">
                                    <div class="input-group">
                                       <label>Organization Name<sup>*</sup></label>
                                        <input type="text" class="form-control reflect-model" style="background: rgb(240, 237, 237);"
                                        [ngClass]="{ 'is-invalid': submited && userorgdetailsForm.controls['org_name'].errors }"
                                            formControlName="org_name" maxlength="50" readonly/>
                                    </div>
                                        <!-- <div *ngIf="useruserorgdetailsForm.controls['org_name'].invalid && (useruserorgdetailsForm.controls['org_name'].touched || submited)">
                                            <div class="error" *ngIf="useruserorgdetailsForm.controls['org_name'].errors?.required">
                                                Organization Name is required
                                            </div>
                                        </div> -->
                                </div>
                                <div class="col-sm-6">
                                    <div class="input-group">
                                        <label>Contact Person Name<sup>*</sup></label>
                                        <input type="text" class="form-control reflect-model"
                                        [ngClass]="{ 'is-invalid': submited && userorgdetailsForm.controls['spocname'].errors }"
                                            formControlName="spocname" oninput="this.value = this.value.replace(/[^a-zA-Z ]/g, '').replace(/(\..*)\./g, '$1');" maxlength="50" />
            
                                    </div>
                                        <!-- <div
                                            *ngIf="useruserorgdetailsForm.controls['spocname'].invalid && (useruserorgdetailsForm.controls['spocname'].touched || submited)">
                                            <div class="error" *ngIf="useruserorgdetailsForm.controls['spocname'].errors?.required">
                                                Contact Person Name is required
                                            </div>
                                        </div> -->
                                </div>
                                <div class="col-sm-6">
                                    <div class="input-group">
                                        <label>Contact Person Designation<sup>*</sup></label>
                                        <input type="text" class="form-control reflect-model"
                                        [ngClass]="{ 'is-invalid': submited && userorgdetailsForm.controls['spocdesignation'].errors }"
                                            formControlName="spocdesignation" oninput="this.value = this.value.replace(/[^a-zA-Z10-9 ]/g, '').replace(/(\..*)\./g, '$1');" maxlength="50" />
            
                                    </div>
                                        <!-- <div
                                            *ngIf="useruserorgdetailsForm.controls['spocdesignation'].invalid && (useruserorgdetailsForm.controls['spocdesignation'].touched || submited)">
                                            <div class="error" *ngIf="useruserorgdetailsForm.controls['spocdesignation'].errors?.required">
                                                Contact Person Designation is required.
                                            </div>
                                        </div> -->
                                </div>
                                <div class="col-sm-6">
                                        <label>Contact Person Number<sup>*</sup></label>
                                        <div class="input-group prefix">
                                            <span class="input-group-addon">+91</span>
                                            <input type="text" class="form-control reflect-model"
                                            [ngClass]="{ 'is-invalid': submited && userorgdetailsForm.controls['spoccontactnumber'].errors }"
                                                formControlName="spoccontactnumber" maxlength="10" minlength="10"
                                                oninput="this.value = this.value.replace(/[^0-9]/g, '').replace(/(\..*)\./g, '$1');" />
                                        </div>
                                </div>
                                <div class="col-sm-12">
                                    <div class="input-group">
                                        <label>Email Id<sup>*</sup></label>
                                        <input type="text"  class="form-control reflect-model"
                                        [ngClass]="{ 'is-invalid': submited && userorgdetailsForm.controls['spocemail'].errors }"
                                            formControlName="spocemail" maxlength="35"/>
            
                                    </div>
                                </div> 
        
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="row">
                                <div class="col-sm-12">
                                    <div class="input-group">
                                        <label>Address<sup>*</sup></label>
                                        <textarea rows="4" cols="50" type="text" class="form-control reflect-model"
                                        [ngClass]="{ 'is-invalid': submited && userorgdetailsForm.controls['address'].errors }"
                                            formControlName="address" maxlength="150" style="height:212px;"></textarea>
            
                                    </div>
                                        <!-- <div
                                        *ngIf="useruserorgdetailsForm.controls['address'].invalid && (useruserorgdetailsForm.controls['address'].touched || submited)">
                                        <div class="error" *ngIf="useruserorgdetailsForm.controls['address'].errors?.required">
                                            Address is required.
                                        </div>
                                    </div> -->
                                </div>
                            </div>
                        </div>
                    </div>
                   
                        
                        <!-- <div class="col-sm-4">
                            <label>Upload Logo (JPG or PNG Max size 100 Kb)</label>
                            <br>
                            <input class="box__file" type="file" name="files[]" id="file"
                                data-multiple-caption="{count} files selected" multiple />
                            <br>
                            <button class="box__button" type="submit">Upload</button>
                        </div> -->
                                <!-- <div *ngIf="useruserorgdetailsForm.controls['spocemail'].invalid && (useruserorgdetailsForm.controls['spocemail'].touched || submited)">
                                <span class="error" *ngIf="useruserorgdetailsForm.controls['spocemail'].errors?.required">
                                    Email Id is required.
                                </span>
                                <span class="error" *ngIf="useruserorgdetailsForm.controls['spocemail'].errors?.email || useruserorgdetailsForm.controls['spocemail'].errors?.pattern">
                                Invalid Email.
                            </span>
                            </div> -->
        
                            <!-- <small>Note: This email will be used for user creation.</small> -->
                        
                    <h5 class="sub-title">Subscriptions</h5>
                    <div class="table-container scroll-container">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th scope="col">Subscription Name</th>
                                    <th scope="col">Start Date</th>
                                    <th scope="col">End Date</th>
                                    <th scope="col">Number of Runs</th>
                                    <th scope="col">Status</th>
                                </tr>
                            </thead>
                            <tbody *ngIf="usersubs?.length == 0">
                                <tr *ngFor="let item of usersubs">
                                    <td>{{item.processName}}</td>
                                    <td>{{item.startDate}}</td>
                                    <td>{{item.endDate}}</td>
                                    <td>{{item.runCount}}</td>
                                    <td>{{item.isActive | uppercase }}</td>
                                </tr>
                            </tbody>
                            <tbody>
                                <tr>
                                    <td colspan="5"> No data found </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <br>
                    <h5 class="sub-title">Workspace</h5>
                    <div class="table-container scroll-container">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th scope="col">Workspace Name</th>
                                    <th scope="col">Start Date</th>
                                    <th scope="col">End Date</th>
                                    <!-- <th scope="col">Number of Runs</th> -->
                                    <th scope="col">Status</th>
                                </tr>
                            </thead>
                            <tbody  *ngIf="userworkspace?.length != 0">
                                <tr *ngFor="let item1 of userworkspace">
                                    <td>{{item1.subscriptionType}}</td>
                                    <td>{{item1.startDate}}</td>
                                    <td>{{item1.endDate}}</td>
                                    <!-- <td>{{item1.runCount}}</td> -->
                                    <td>{{item1.isActive | uppercase }}</td>
                                </tr>
                            </tbody>
                            <tbody>
                                <tr>
                                    <td colspan="4"> No data found </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
              
            </form>
        </mat-card>
    </div>
    <div class="button-group">
        <button mat-button  type="reset" (click)="cancel()">Cancel <span class="dds-icon dds-icon_close__l__stroke"></span></button>
        <!-- <button mat-button class="primary" (click)="userorgdetailsSubmit()" type="submit">Save <mat-icon>save</mat-icon></button> -->
        <button mat-button type="button" (click)="userorgdetailsSubmit()" class="primary">Save <mat-icon>save</mat-icon>
          </button>
    </div>
</div>
    
